# üöÄ CONTROL DE CACH√â - Lume 2.1.0
# Forzar actualizaci√≥n de archivos est√°ticos

# üì± ARCHIVOS HTML - NO CACHEAR
<FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# üé® ARCHIVOS CSS Y JS - CACHEAR CON VERSI√ìN
# Si tiene ?v= en la URL, no cachear (forzar recarga)
<FilesMatch "\.(css|js)$">
    # Verificar si tiene par√°metro de versi√≥n
    <If "%{QUERY_STRING} =~ /v=/">
        Header set Cache-Control "no-cache, no-store, must-revalidate"
        Header set Pragma "no-cache"
        Header set Expires 0
    </If>
    <Else>
        Header set Cache-Control "public, max-age=31536000"
        Header set Vary "Accept-Encoding"
    </Else>
</FilesMatch>

# üñºÔ∏è IM√ÅGENES - CACHEAR LARGO PLAZO
<FilesMatch "\.(jpg|jpeg|png|gif|webp|svg|ico)$">
    Header set Cache-Control "public, max-age=31536000"
    Header set Vary "Accept-Encoding"
</FilesMatch>

# üìÑ FUENTES - CACHEAR LARGO PLAZO
<FilesMatch "\.(woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=31536000"
    Header set Vary "Accept-Encoding"
</FilesMatch>

# üîÑ MANIFEST Y SERVICE WORKER - NO CACHEAR
<FilesMatch "(manifest\.json|sw\.js)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# üöÄ COMPRESI√ìN GZIP
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
    AddOutputFilterByType DEFLATE application/json
</IfModule>

# üì± HEADERS DE SEGURIDAD
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# üîí REDIRECCIONES HTTPS (descomentar si tienes SSL)
# RewriteEngine On
# RewriteCond %{HTTPS} off
# RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
